<!DOCTYPE html>
<html lang="FR">
<head>
     <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
       
     <!-- Méta Google -->
    <meta name="title" content="Colorflow - Case study - Christopher Saenen" />
    <meta name="description" content="Colorflow te permet de récupérer une palette de couleurs à partir de n'importe quelle image." />

    <!-- Métas Facebook Opengraph -->
    <meta property="og:title" content="Colorflow - Christopher Saenen" />
    <meta property="og:description" content="Colorflow te permet de récupérer une palette de couleurs à partir de n'importe quelle image." />
    <meta property="og:url" content="http://christophersaenen.be/projets/tfa/case-study/" />
    <meta property="og:image" content="../metas.jpg" />
    <meta property="og:type" content="website"/>

    <!-- Métas Twitter Card -->
    <meta name="twitter:title" content="Colorflow - Christopher Saenen" />
    <meta name="twitter:description" content="Colorflow te permet de récupérer une palette de couleurs à partir de n'importe quelle image." />
    <meta name="twitter:url" content="http://christophersaenen.be/projets/tfa/case-study/" />
    <meta name="twitter:image" content="../metas.jpg" />
    
    
    <link rel="apple-touch-icon" sizes="57x57" href="../assets/img/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../assets/img/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../assets/img/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../assets/img/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../assets/img/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../assets/img/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../assets/img/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="../assets/img/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../assets/img/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="../assets/img/favicons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../assets/img/favicons/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    
    <title>Case Study | Colorflow</title>
    <link rel="stylesheet" href="../main.css">
</head>

<body class="body__side">
   <header class="header header--fixed">
        <h1 class="header__logo title title--main">
            <a href="../index.html">Colorflow
            <svg class="logo__big logo" viewBox="0 0 630.41797 120" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs>                   <style>.grad1{fill:url(#loga);}.grad2{fill:url(#logd);}.grad3{fill:url(#logc);}.grad4{fill:url(#logb);}</style>
                        <linearGradient id="loga" x2="120" y1="60" y2="60" gradientUnits="userSpaceOnUse">
                        <stop stop-color="#fad11c" offset="0"/>
                        <stop stop-color="#e8a534" offset=".09502"/>
                        <stop stop-color="#d06954" offset=".23417"/>
                        <stop stop-color="#be3e6b" offset=".353"/>
                        <stop stop-color="#b3247a" offset=".44537"/>
                        <stop stop-color="#af1a7f" offset=".5"/>
                        <stop stop-color="#914194" offset=".57574"/>
                        <stop stop-color="#7763a5" offset=".65635"/>
                        <stop stop-color="#637eb3" offset=".73874"/>
                        <stop stop-color="#5491bd" offset=".82249"/>
                        <stop stop-color="#4c9cc3" offset=".90844"/>
                        <stop stop-color="#49a0c5" offset="1"/>
                        </linearGradient>
                        <linearGradient id="logd" x1="127.67" x2="200.33" y1="83.333" y2="83.333" xlink:href="#loga"/>
                        <linearGradient id="logc" x1="243.33" x2="316" y1="83.394" y2="83.394" xlink:href="#loga"/>
                        <linearGradient id="logb" x1="454.33" x2="527" y1="83.394" y2="83.394" xlink:href="#loga"/>
                    </defs>
                    <g data-name="logo_colorflow">
                    <path d="m208.7 97.857v-67.862h16.121v66.822q0 4.9409 2.0146 6.9551 2.0156 2.0156 7.2153 2.0156h6.1104v13.91h-8.9702q-11.44 0-16.966-5.3955-5.5254-5.395-5.5254-16.445z"/>
                    <path d="m337.14 52.096v7.6699a21.088 21.088 0 0 1 8.5151 -6.8252 27.454 27.454 0 0 1 11.246 -2.2744 33.118 33.118 0 0 1 6.3701 0.51953v15.341a26.714 26.714 0 0 0 -9.6201 -1.6904q-7.6707 0-11.896 4.4854-4.2253 4.4853-4.2256 12.936v37.441h-16.12v-67.603z"/>
                    <path d="m395.38 48.716v3.3799h14.561v11.311h-14.561v56.292h-15.991v-56.292h-9.1001v-11.311h9.1001v-2.7305q0-9.6196 5.0703-14.495 5.0706-4.875 14.951-4.875h10.53v10.92h-5.98q-4.6802 0-6.6304 1.8203-1.9504 1.8208-1.9502 5.9805z"/>
                    <path d="m420.46 97.857v-67.862h16.121v66.822q0 4.9409 2.0146 6.9551 2.0156 2.0156 7.2153 2.0156h6.1104v13.91h-8.9702q-11.44 0-16.966-5.3955-5.5254-5.395-5.5254-16.445z"/>
                    <path d="m542.4 52.096l13.65 45.242 15.73-45.242h12.091l15.99 45.242 13.391-45.242h17.161l-23.271 67.603h-13.65l-15.601-45.762-15.731 45.762h-13.65l-23.142-67.603z"/>
                    <path class="grad1" d="M60,0a60,60,0,1,0,60,60A60,60,0,0,0,60,0Zm0,100a40,40,0,1,1,40-40A40,40,0,0,1,60,100Z"/>
                    <g class="logo__el logo__el--c">
                        <path d="m82.188 93.282a40.004 40.004 0 1 1 -0.78907 -67.069l10.699-16.894a59.995 59.995 0 1 0 1.1835 100.6z"/>
                        <path d="m120 60l-1 1h1"/>
                    </g>
                    <path class="grad2" d="m164 47a36.333 36.333 0 1 0 36.333 36.333 36.333 36.333 0 0 0 -36.333 -36.333zm0 60.556a24.222 24.222 0 1 1 24.222 -24.222 24.222 24.222 0 0 1 -24.222 24.222z"/>
                    <g class="logo__el logo__el--o1">
                        <path d="m143.85 96.769a24.224 24.224 0 1 1 40.614 -0.47782l10.23 6.4791a36.33 36.33 0 1 0 -60.921 0.71669z"/>
                        <path d="m164 119.67l-0.60556-0.60556v0.60556"/>    
                    </g>
                    <path class="grad3" d="m279.67 47.061a36.333 36.333 0 1 0 36.333 36.333 36.333 36.333 0 0 0 -36.333 -36.333zm0 60.556a24.222 24.222 0 1 1 24.222 -24.222 24.222 24.222 0 0 1 -24.222 24.222z"/>
                    <g class="logo__el logo__el--o2">
                        <path d="m266.23 63.24a24.224 24.224 0 1 1 0.47782 40.614l-6.4791 10.23a36.33 36.33 0 1 0 -0.71669 -60.921z"/>
                        <path d="m243.33 83.394l0.60556-0.60555h-0.60556"/>
                    </g>
                    <path class="grad4" d="m490.67 47.061a36.333 36.333 0 1 0 36.333 36.333 36.333 36.333 0 0 0 -36.333 -36.333zm0 60.556a24.222 24.222 0 1 1 24.222 -24.222 24.222 24.222 0 0 1 -24.222 24.222z"/>
                    <g class="logo__el logo__el--o3">
                        <path d="m510.82 69.958a24.224 24.224 0 1 1 -40.614 0.47782l-10.23-6.4791a36.33 36.33 0 1 0 60.921 -0.71669z"/>
                        <path d="m490.67 47.061l0.60555 0.60556v-0.60556"/>
                    </g>
                    </g>
                </svg>
                <svg class="logo__small logo" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <style>.logo__small--c{fill:url(#e);}</style>
                        <linearGradient id="e" x2="120" y1="60" y2="60" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#fad11c" offset="0"/>
                            <stop stop-color="#e8a534" offset=".09502"/>
                            <stop stop-color="#d06954" offset=".23417"/>
                            <stop stop-color="#be3e6b" offset=".353"/>
                            <stop stop-color="#b3247a" offset=".44537"/>
                            <stop stop-color="#af1a7f" offset=".5"/>
                            <stop stop-color="#914194" offset=".57574"/>
                            <stop stop-color="#7763a5" offset=".65635"/>
                            <stop stop-color="#637eb3" offset=".73874"/>
                            <stop stop-color="#5491bd" offset=".82249"/>
                            <stop stop-color="#4c9cc3" offset=".90844"/>
                            <stop stop-color="#49a0c5" offset="1"/>
                        </linearGradient>
                    </defs>
                    <g data-name="letter_c">
                        <path class="logo__small--c" d="M60,0a60,60,0,1,0,60,60A60,60,0,0,0,60,0Zm0,100a40,40,0,1,1,40-40A40,40,0,0,1,60,100Z"/>
                        <g class="logo__el logo__el--bigc">
                            <path d="m82.188 93.282a40.004 40.004 0 1 1 -0.78907 -67.069l10.699-16.894a59.995 59.995 0 1 0 1.1835 100.6z"/>
                            <path d="m120 60l-1 1h1"/>
                        </g>
                    </g>
                </svg>
            </a>
        </h1>
        <nav class="header__nav">
            <ul class="space-between">
                <li class="title title--normal title--bold"><a href="../index.html">Colorflow</a></li>
                <li class="title title--normal title--bold"><a href="../a-propos/index.html">&Agrave; propos</a></li>
                <li class="title title--normal title--bold"><a href="../../vcard">VCARD</a></li>
            </ul>
        </nav>
   </header>
   <section class="casestudy">
        <h2 class="title title--giant title--bold">Case study</h2>
        <div class="subsection">
            <h3 class="col col--center title title--big title--bold ">Par où commencer ?</h3>
            <p class="col col--center">Un side-project, peu de contraintes, aller vers un domaine qui nous intéresse, qui nous motive et qui nous permettra de trouver un stage. Voilà ce qu’on savait de notre TFA début avril. Pour trouver une idée qui soit pertinente, j’ai listé mes attentes, ce que je savais déjà faire, ce que je voulais et ce que je pouvais apprendre en un temps relativement réduit.</p>
            <p class="col col--center">J’ai de bonnes bases en code, particulièrement en JavaScript et je sais que je suis capable d’apprendre de nouveaux concepts rapidement, ainsi que de les mettre en application dans un autre contexte. Je suis très intéressé par le fait de coder plus proprement, c’est-à-dire en orienté objet. De plus, je veux me perfectionner en JavaScript Vanilla, donc sans passer par des libraires externes, et c’est pour moi la meilleure façon de comprendre un langage.</p>
            <p class="col col--center">Je suis assez fasciné par les animations en général, j’aime qu’un site soit vivant, qu’il m’épate. Le plus difficile quand on design un site, c’est de trouver le juste milieu. Les animations doivent le servir et avoir une vraie plus-value, alors qu'il est facile d'en faire trop.</p>
            <p class="col col--center">Enfin, je voulais travailler sur de nouvelles notions. J’ai eu un aperçu des canvas il y a de cela quelques mois (à dater d'avril 2018) et je m’y suis de plus en plus intéressé, jusqu’à me rendre compte de la place de plus en plus grande que prenait cet élément HTML sur les sites actuels, souvent couplé à des librairies adaptées.</p>
        </div>
        <div class="subsection subsection__middle">
            <h3 class="title title--big title--bold">Colorflow, le juste milieu</h3>
            <p class="col col--center">Après une (très) longue réflexion, j’ai trouvé un concept, si pas neuf, au moins intéressant et suffisamment solide à développer. L'idée derrière Colorflow est d'<strong>extraire une palette de couleurs d’une image donnée</strong> . Cela me permet de développer toute une série de compétences telles que :</p>
            <ul class="col col--center">
                <li>développer un code relativement conséquent proprement&nbsp;;</li>
                <li>rendre un code lisible pour une personne externe&nbsp;;</li>
                <li>prendre en compte la performance et l’optimisation du code&nbsp;;</li>
                <li>travailler avec des millions de données&nbsp;;</li>
                <li>créer une interface permettant une utilisation aisée de l’outil développé&nbsp;;</li>
                <li>travailler sur un élément de type canvas&nbsp;;</li>
                <li>travailler un design de manière responsive&nbsp;;</li>
                <li>adapter les interactions au mobile.</li>
            </ul>
        </div>
        <div class="problems subsection__problems subsection">
            <h3 class="col col--center title title--big title--bold">Problèmes et solutions</h3>
            <div class="problems__container problem">
                <h4 class="col col--center title title--up title--bold">Développer proprement</h4>
                <p class="col col--center">L'avantage du JavaScript, c'est qu'il est facile à coder. Il suffit de créer une fichier avec l'extension .js et de commencer à écrire. Le problème étant la tendance à avoir un code spaghetti une fois qu'il atteint les quelques dizaines ou centaines de lignes, c'est-à-dire qu'il devient peu clair car déstructuré et donc difficile à mettre à jour et à lire.</p>
                <p class="col col--center">J'ai donc entrepris, avant de me lancer dans la programmation de Colorflow, de suivre un cours de JavaScript orienté objet sur <a class="link" href="https://www.udemy.com/learn-modern-javascript-advanced-topics/">Udemy</a> où j'ai pu apprendre une meilleure manière de coder. &Agrave; ce jour, je n'ai pas intrégré absolument toutes les notions, j'ai réussi à aboutir à avoir un code bien mieux structuré et maintenable. Je reviendrai sans doute sur ce cours (ou un autre) dans un futur proche afin d'assimiler ce qu'il me manque.</p>
            </div>                
            <div class="problems__container datas">
                <h4 class="col col--center title title--up title--bold">Trop de données</h4>
                <p class="col col--center">Comment obtenir une palette de couleur à partir de n'importe quelle image ? La réponse tient en plusieurs étapes :</p>
                <ul class="col col--center">
                    <li>redessiner l'image sur un canvas&nbsp;;</li>
                    <li>récupérer les valeurs RGB de chaque pixel&nbsp;;</li>
                    <li>appliquer un algorithme spécifique afin d'avoir des couleurs représentatives&nbsp;;</li>
                    <li>afficher les couleurs.</li>
                </ul>
                <p class="col col--center">Le premier problème vient du fait qu'une image contient énormément de pixels. Pour mes tests, j'ai utilisé un canvas de 600x375 pixels, ce qui me donne au total 900&nbsp;000 données de couleur (chaque pixel comporte les valeurs rouge, verte, bleue et alpha)! </p>
                <div class="encart col col--center">
                    <img src="../assets/img/arraybuffer.png" alt="screenshot arrayBuffer" srcset="../assets/img/arraybuffer@2x.png, ../assets/img/arraybuffer@3x.png">
                    <p class="title col--center text--small">log de l'arrayBuffer d'une image 600x375px</p>
                </div>
                <p class="col col--center">En pratique, un canvas permet de récupérer quatre tableaux de valeurs (qui sont de type ArrayBuffer), mais seuls deux vont nous intéresser ici : <a class="link" href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Int32Array">Int32Array</a> et <a class="link" href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Uint8Array">Uint8Array</a>. Ce dernier contient 900&nbsp;000 valeurs qui sont triées par pixel [r1, g1, b1, a1, r2, g2, b2, a2, ...] et va nous servir pour l'algorithme. Quant à Int32Array, il contient 225&nbsp;000 données et la seule chose importante à savoir, c'est qu'une valeur égale à zéro est un pixel noir.</p>
                <p class="col col--center">Des 900&nbsp;000 valeurs, il est déjà possible de réduire ce nombre de 25&nbsp;% en enlevant la valeur alpha de transparence qui est toujours égale à 255 et qui n'a donc aucune utilité.</p>
                <p class="col col--center">Je me retrouve donc avec un nombre de pixels qui reste conséquent. Après mes tests, les calculs pouvant prendre plusieurs secondes, j'ai pris la décision de créer un second canvas, invisible à l'écran, qui a une taille de 100 pixels au maximum (largeur ou hauteur), ce qui réduit sa surface drastiquement et rend le calcul de la palette bien plus court (de l'ordre de la centaine de millisecondes au maximum).</p>
                <p class="col col--center">En revanche, les résultats entre un canvas ayant les dimensions de l'image originale et un canvas de 100 pixels maximum sont différents. C'est pourquoi j'ai introduit un bouton de précision sur la page afin de laisser le choix à l'utilisateur (100 ou 800 pixels maximum).</p>
                <div class="col col--center encart">
                    <h5 class="title title--up title--bold">Comparaison des résultats par surface de canvas</h5>
                    <ul class="datas__boxes datas__boxes--1000">
                        <li class="comparison__title">1000px * 625px</li>
                        <li class="comparison__box">67.6&nbsp;%</li>
                        <li class="comparison__box">13.1&nbsp;%</li>
                        <li class="comparison__box">9.1&nbsp;%</li>
                        <li class="comparison__box">4.7&nbsp;%</li>
                        <li class="comparison__box">2.4&nbsp;%</li>
                        <li class="comparison__box">1.5&nbsp;%</li>
                        <li class="comparison__box">0.9&nbsp;%</li>
                        <li class="comparison__box">0.6&nbsp;%</li>
                    </ul>              
                       <ul class="datas__boxes datas__boxes--600">
                        <li class="comparison__title title--link">600px * 375px</li>
                        <li class="comparison__box">66.1&nbsp;%</li>
                        <li class="comparison__box">12.9&nbsp;%</li>
                        <li class="comparison__box">9.5&nbsp;%</li>
                        <li class="comparison__box">5.9&nbsp;%</li>
                        <li class="comparison__box">2.4&nbsp;%</li>
                        <li class="comparison__box">1.5&nbsp;%</li>
                        <li class="comparison__box">0.9&nbsp;%</li>
                        <li class="comparison__box">0.7&nbsp;%</li>
                    </ul>            
                    <ul class="datas__boxes datas__boxes--100">
                        <li class="comparison__title title--link">100px * 62.5px</li>
                        <li class="comparison__box">65.9&nbsp;%</li>
                        <li class="comparison__box">12.6&nbsp;%</li>
                        <li class="comparison__box">12.0&nbsp;%</li>
                        <li class="comparison__box">3.9&nbsp;%</li>
                        <li class="comparison__box">2.4&nbsp;%</li>
                        <li class="comparison__box">1.6&nbsp;%</li>
                        <li class="comparison__box">0.9&nbsp;%</li>
                        <li class="comparison__box">0.7&nbsp;%</li>
                    </ul>          
                    <ul class="datas__boxes datas__boxes--50">
                        <li class="comparison__title title--link">50px * 31px</li>
                        <li class="comparison__box">70&nbsp;%</li>
                        <li class="comparison__box">12.6&nbsp;%</li>
                        <li class="comparison__box">11.9&nbsp;%</li>
                        <li class="comparison__box">2.4&nbsp;%</li>
                        <li class="comparison__box">1.2&nbsp;%</li>
                        <li class="comparison__box">1.0&nbsp;%</li>
                        <li class="comparison__box">0.7&nbsp;%</li>
                        <li class="comparison__box">0.1&nbsp;%</li>
                    </ul> 
                </div>
                <p class="col col--center">La différence entre le format 1&nbsp;000 et 600 est vraiment négligeable, où seules certaines couleurs changent légèrement. Par contre, on peut s'apercevoir qu'une petite taille de canvas influe beaucoup sur le rendu.</p>
            </div>
            <div class="problems__container mediancut">
                <h4 class="col col--center title title--up title--bold">Median-cut algorithm</h4>
                <p class="col col--center">Avant d'arriver à tous mes tests de performance, il m'a fallu construire l'algorithme qui est basé sur le <a class="link"  href="https://en.wikipedia.org/wiki/Color_quantization">median-cut de Paul Heckbert</a>.</p>
                <p class="col col--center">Métaphoriquement, le principe est de mettre tous les pixels dans un seau, puis de calculer la plus longue distance des valeurs r, g et b. La distance, c'est la différence entre la valeur maximale et minimale de tous les pixels.</p>
                <p class="col col--center">Par exemple, si la distance du rouge est à 200, celle du vert à 198 et le bleu à 180, alors le median cut sera 200. C'est à ce stade que le seau initial est divisé en deux nouveaux seaux, où chaque pixel est transvasé selon le median cut. Si l'on fait la moyenne des valeurs r, g et b de chaque seau, on obtient deux couleurs. Et si l'on veut quatre couleurs, on refait l'opération sur chaque sous-seau.</p>
                <p class="col col--center">Et c'est ici que le problème de division apparaît. Si je divise chaque seau en deux, j'aurai toujours un nombre de couleurs équivalent à 2<sup>n</sup>. Mais que se passe-t-il si je veux trois, cinq, six couleurs ? J'ai pris la décision, la plus simple et correcte de mon point de vue, de diviser à chaque fois le seau qui a le plus grand median cut, puisque c'est c'est là que se trouve la plus grande variance.</p>
            </div>
        </div>
        <div class="subsection__results subsection">
            <h3 class="col col--center title title--big title--bold">Des résultats étonnants</h3>
            <div class="design__container design">
                <h4 class="col col--center title title--up title--bold">Quelques exemples</h4>
                <p class="col col--center">Si appliquer un algorithme, c'est aussi être capable de le comprendre, il n'en reste pas moins frustrant de voir que les résultats ne sont pas toujours à la hauteur de ce que l'on attend. Et particulèrement dans le cas de Colorflow, si les couleurs calculées ne correspondent pas à notre image, alors personne ne l'utilisera, car il est évident que la précision est primordiale.</p>
                <p class="col col--center">Je ne suis pas arrivé dès la première itération de mon code à obtenir des couleurs fidèles. Par exemple, après avoir lu plusieurs sources expliquant la méthode de median-cut, j'en avais déduis que la division des seaux devait se faire équitablement, et non par la valeur median-cut, peu importe le nombre de pixels dans chaque subdivision. Les résultats obtenus étaient alors souvent fades, et les petites parties colorées de l'image ainsi que les couleurs pétantes n'étaient jamais présentes.</p>
            </div>             
               <div class="design__container design">
                <h4 class="col col--center title title--up title--bold">Comparaison avec la concurrence</h4>
                <p class="col col--center">Le plus étonnant est la différence entre mes résultats et ceux des sites concurrents. J'ai en général de bien meilleurs résultats, en particulier lorsqu'il s'agit de récupérer une couleur peu présente mais bien visible.</p>
                <p class="col col--center">En regardant les codes de ces sites, je me suis aperçu que la plupart utilisait une libraire externe, <a  class="link" href="https://gist.github.com/thinkxl/4262930">quantize.js</a>, pour effectuer le calcul. Cette librairie est bien plus complète que ce que j'ai codé, mais les résultats à la sortie sont moins bons. Je n'ai pas testé cette méthode sur mon site, et il s'agit peut-être simplement de mauvais paramétrage. </p>
                <div class="comparison col col--center">
                    <h4 class="title title--up title--bold">Une image parle mieux que des mots</h4>
                    <p>J'ai effectué plusieurs palettes d'une même image sur différents sites et je les ai compilés pour vous donner une idée des différences qu'il peut y avoir. Ces sites n'offrent pas de possiblité de choisir le nombre de couleurs, j'ai donc ajusté ma palette aux leurs.</p>
                    <img class="comparison__img" src="../assets/img/img_init.jpg" alt="image abstraite de test" srcset="../assets/img/img_init@2x.jpg, ../assets/img/img_init@3x.jpg">
                    <ul class="comparison__colorflow">
                        <li class="comparison__title">Colorflow</li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                    </ul>     
                    <ul class="comparison__colorpal">
                        <li class="comparison__title title--link"><a href="https://palebluepixel.org/static/projects/colorpal/">Colorpal</a></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                    </ul>              
                    <ul class="comparison__colorthief">
                        <li class="comparison__title title--link"><a href="http://lokeshdhakar.com/projects/color-thief/">Colorthief</a></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                        <li class="comparison__box"></li>
                    </ul>           
                    <ul class="comparison__colorflow--5">
                        <li class="comparison__title">Colorflow</li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                    </ul>           
                    <ul class="comparison__canva">
                        <li class="comparison__title title--link"><a href="https://www.canva.com/color-palette/">Canva</a></li>

                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                    </ul>        
                    <ul class="comparison__colorfavs">
                        <li class="comparison__title title--link"><a href="http://www.colorfavs.com/">Colofavs</a></li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                        <li class="comparison__box comparison__box--5"></li>
                    </ul>
                </div>     
            </div>       

        </div>
        <div class="design subsection">
            <h3 class="col col--center title title--big title--bold">Rendre l'algorithme utilisable</h3>

            <div class="col col--center design__container design">
                <h4 class="title title--up title--bold">La zone de sélection</h4>
                <p>Avant de m'intéresser au design du site, il me restait une dernière fonctionnalité à implémenter : la zone de sélection. Dès le début, j'ai voulu donner l'opportunité à l'utilisateur de sélectionner une partie de l'image, car il n'est pas dit qu'il veuille la palette de l'entièreté de l'image.</p>
                <p>Malheureusement, je ne pouvais pas utiliser le canvas de l'image pour dessiner un rectangle de sélection car il aurait effacé les pixels correspondants et j'ai donc dû remettre un nouveau canvas transparent par dessus. J'ai dû faire face à plusieurs problèmes, comme le fait de devoir réinitialiser le canvas à chaque fois que l'utilisateur tente une sélection ou faire correspondre la sélection au canvas en dessous, puisqu'en fait, je sélectionne du vide.</p>
                <p>Mais le problème le plus important est le fait de pouvoir continuer la sélection même si le curseur est en dehors du canvas. &Ccedil;a peut paraître futile, mais c'est une situation de frustration pour l'utilisateur et donc de mauvaise expérience, ce que je veux éviter. Je me suis obstiné à prendre mon canvas comme référence ce qui m'a amené à beaucoup de frustration.</p>
                <p>Pour calculer le rectangle à dessiner, il faut soustraire la position du curseur à la position de départ (lors du clic). Mais lorsque le curseur arrivait hors des limites du canvas, les positions x et y devenaient celles de l'élement en hover, ce qui empêchait une utilisation hors canvas. Pour y remédier, j'ai eu la brillante idée, deux mois plus tard, de calculer la position par rapport au body, ce qui résout tous les problèmes. Parfois, les choses simples sont les plus difficiles à trouver.</p>
            </div>            
            <div class="col col--center design__container design">
                <h4 class="title title--up title--bold">Un problème de ratio</h4>
                <p>Lors de mes essais de rendre le site responsive, un problème est apparu. Si la zone de sélection fonctionne très bien sur le canvas orginal, le rectangle se dessinait avec un décalage lorsque le canvas changeait de dimension par le CSS.</p>
                <p>Pour dessiner une rectangle, il faut quatre valeurs : les points de départ en x et en y, ainsi que la largeur et la hauteur. Toutes ces données se décalaient inexplicablement dès que l'image s'agrandissait, ce qui m'a valu beaucoup d'incompréhension.</p>
                <p>Au final, j'ai remarqué que le décalage s'amplifiait plus le rectangle grandissait. Le problème est le fait que le dessin se construit par rapport aux dimensions originales, et pour y remédier, il faut calculer un ratio entre les valeurs des deux canvas (l'ancien et l'actuel).</p>
            </div>            
        </div>
        <div class="design__container subsection__design subsection">
            <h3 class="col col--center title title--big title--bold">Le design</h3>
            <div class="design__container design">
                <h4 class="col col--center title title--up title--bold">Première idée, premiers mauvais choix</h4>
                <p class="col col--center">La partie délicate de mon projet, c'est bien l'interface et le design du site. Mon code fonctionne, mais il doit être mis en valeur par une vitrine tout en étant utilisable et agréable à naviguer. Mon site devait réunir plusieurs impératifs :</p>
                <ul class="col col--center">
                    <li>La palette de couleurs doit être visible en permanence&nbsp;;</li>
                    <li>Les codes couleurs doivent être explicitement affichés&nbsp;;</li>
                    <li>Les paramètres doivent être facilement utilisables et explicites&nbsp;;</li>
                    <li>Les codes doivent pouvoir être copiés et cette fonction doit être explicite&nbsp;;</li>
                    <li>L'utilisateur doit savoir qu'il est possible de dessiner une zone de sélection sur le canvas&nbsp;;</li>
                    <li>La quantité et le nom de chaque couleur doivent être visibles&nbsp;;</li>
                    <li>Le site doit uniquement servir à promouvoir l'outil développé.</li>
                </ul>
                <p class="col col--center">Ma première démarche a été de placer l'image au centre de la page et de l'encadrer. Pourquoi l'encadrer ? Pour rappel, lors du développement de la zone de sélection, j'étais focalisé  sur le canvas et j'avais trouvé un moyen de pouvoir sortir de cette zone afin de continuer à la dessiner, mais cela causait des bugs lorsque le curseur touchait un autre élément.</p>
                <p class="col col--center">J'ai donc cherché à créer une &laquo;safe zone&raquo; autour de l'image. Les couleurs étaient disposées en grille sous l'image avec sa quantité, son code hexadécimal et son nom. J'avais imaginé de dévoiler les codes sur la tuile qui se serait alors retournée. Enfin, après quelques itérations, j'ai placé un cadre avec quelques lignes d'explication de l'outil.</p>
                <div class="design__interfaces">
                    <div class="center">
                      <img src="../assets/img/interface_01.jpg" alt="premier design de Colorflow" srcset="../assets/img/interface_01@2x.jpg, ../assets/img/interface_01@3x.jpg">
                      <p class="title col--center text--small">Dernière itération avant de repartir de zéro.</p>
                    </div>
                    <div class="center">
                    <img src="../assets/img/interface_02.jpg" alt="design final de Colorflow" srcset="../assets/img/interface_02@2x.jpg, ../assets/img/interface_02@3x.jpg">
                    <p class="title col--center text--small">Une des dernières itérations avant le passage au code. La première roue a disparu au profit d'un switch.</p>
                    </div>
                </div>
            </div>
            <div class="col col--center design__container design">
                <h4 class="title title--up title--bold">Changement de cap</h4>
                <p>Après plusieurs discussions, des problèmes évidents de design ont été mis en lumière. Si expliquer le fonctionnement du site peut sembler louable, il révèle surtout un mauvais design. Un site bien conçu doit être auto-suffisant, c'est-à-dire que l'utilisateur doit comprendre ce qu'il doit faire sans devoir l'obliger à lire une explication au préalable.</p>
                <p>Le cadre explicatif a aussi l'inconvénient de prendre une place significative sur la page. De l'autre côté, centrer tous le contenu fait perdre beaucoup de place et oblige le scroll pour accéder aux couleurs. Ceci peut devenir problématique lorsque l'on veut passer des couleurs aux paramètres de l'image.</p>
                <p>J'ai alors décidé de repartir de zéro. Les quelques références telles que <a class="link" href="https://color.adobe.com/">Adobe Colors</a> et <a class="link" href="https://coolors.co">Coolors</a> n'ont peu ou pas de scroll, tout est visible directement. Sachant que mon outil n'a que peu d'éléments (paramètre de précision, nombre de couleurs, tuiles de couleurs, codes et le canvas), il me semblait plus approprié de tout placer sur la largeur de la page, sans permettre de scroll (en version bureau du moins).</p>
                <p>Pour simplifier l'utilisation, j'ai ajouté un overlay sur le canvas pour indiquer qu'il est possible de drag &amp; drop une image. En dessous, j'ai choisi de laisser une explication sur la sélection de zone. Enfin, le nombre de couleurs est représenté par une roue et la précision par un switch. &Agrave; noter que le switch était initialement une roue, mais n'était pas suffisamment explicite pour l'utilisateur, là où un choix binaire est plus clair.</p>
                <p>Les couleurs sont disposées à la droite du canvas et sont visibles en permanence. Qu'il y en ait deux ou dix, les tuiles gardent la même dimension et sont triées par quantité. Pour terminer, les codes ne s'affichent qu'au clic d'une tuile, mais le squelette est toujours visible pour indiquer que oui, le site permet de les récupérer.</p>
            </div>
        </div>

   </section>
   <footer class="footer">
       <ul class="footer__links col col--center">
            <li>
                <a class="title title--small link link--big" href="../../vcard">Voir ma VCARD</a>
            </li>
            <li>
                <a class="title title--small link link--big" href="../index.html">Voir Colorflow</a>
            </li>
        </ul>
    </footer>

    <div class="containerColor"></div>
</body>
</html>